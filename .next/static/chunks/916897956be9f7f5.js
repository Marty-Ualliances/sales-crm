(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,19455,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(91918),a=e.i(25913),i=e.i(75157);let d=(0,a.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),n=s.forwardRef(({className:e,variant:s,size:a,asChild:n=!1,...l},o)=>{let c=n?r.Slot:"button";return(0,t.jsx)(c,{className:(0,i.cn)(d({variant:s,size:a,className:e})),ref:o,...l})});n.displayName="Button",e.s(["Button",()=>n])},31278,e=>{"use strict";let t=(0,e.i(75254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},69638,e=>{"use strict";let t=(0,e.i(75254).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],69638)},29234,e=>{"use strict";var t=e.i(43476);e.i(64862);var s=e.i(9085),r=e.i(82013),a=e.i(32693),i=e.i(87486),d=e.i(19455),n=e.i(3116),l=e.i(69638),o=e.i(78894),c=e.i(43432),u=e.i(31278),x=e.i(71645),m=e.i(46696);function h(){let{data:e=[],isLoading:h}=(0,s.useLeads)(),{user:g}=(0,a.useAuth)(),p=(0,s.useCompleteFollowUp)(),v=(0,r.useCreateCall)(),f=new Date,[b,j]=(0,x.useState)("all"),w=e.filter(e=>!e.assignedAgent||e.assignedAgent===g?.name),N=async(e,t)=>{try{await p.mutateAsync(e),m.toast.success(`Follow-up with ${t} marked as done`)}catch{m.toast.error("Failed to mark follow-up as done")}},y=async e=>{try{let t=e.workDirectPhone||e.mobilePhone||e.phone||"";t&&window.open(`tel:${t.replace(/[^+\d]/g,"")}`,"_self"),await v.mutateAsync({leadId:e.id,leadName:e.name,agentName:g?.name||"Unknown",date:new Date,time:new Date().toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),duration:"0 min",status:"Completed",notes:"Call initiated from follow-ups",hasRecording:!1}),m.toast.success(`Call to ${e.name} logged`)}catch{m.toast.error("Failed to log call")}},C=w.filter(e=>e.nextFollowUp&&"Closed Won"!==e.status&&"Closed Lost"!==e.status).map(e=>({...e,isOverdue:new Date(e.nextFollowUp)<f,daysUntil:Math.ceil((new Date(e.nextFollowUp).getTime()-f.getTime())/864e5)})).sort((e,t)=>new Date(e.nextFollowUp).getTime()-new Date(t.nextFollowUp).getTime()),k=C.filter(e=>"overdue"===b?e.isOverdue:"upcoming"!==b||!e.isOverdue),U=C.filter(e=>e.isOverdue).length,O=C.filter(e=>!e.isOverdue).length;return h?(0,t.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,t.jsx)(u.Loader2,{className:"h-8 w-8 animate-spin text-primary"})}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:"My Follow-ups"}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:[C.length," follow-ups pending"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"rounded-xl border border-border bg-card p-4 shadow-card text-center",children:[(0,t.jsx)(n.Clock,{className:"h-5 w-5 mx-auto mb-2 text-primary"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-foreground",children:C.length}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Total"})]}),(0,t.jsxs)("div",{className:"rounded-xl border border-border bg-card p-4 shadow-card text-center",children:[(0,t.jsx)(o.AlertTriangle,{className:"h-5 w-5 mx-auto mb-2 text-destructive"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-destructive",children:U}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Overdue"})]}),(0,t.jsxs)("div",{className:"rounded-xl border border-border bg-card p-4 shadow-card text-center",children:[(0,t.jsx)(l.CheckCircle,{className:"h-5 w-5 mx-auto mb-2 text-success"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-success",children:O}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Upcoming"})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(d.Button,{variant:"all"===b?"default":"outline",size:"sm",onClick:()=>j("all"),children:["All (",C.length,")"]}),(0,t.jsxs)(d.Button,{variant:"overdue"===b?"default":"outline",size:"sm",onClick:()=>j("overdue"),children:["Overdue (",U,")"]}),(0,t.jsxs)(d.Button,{variant:"upcoming"===b?"default":"outline",size:"sm",onClick:()=>j("upcoming"),children:["Upcoming (",O,")"]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[k.map(e=>(0,t.jsxs)("div",{className:"rounded-xl border border-border bg-card p-4 shadow-card hover:shadow-card-hover transition-shadow",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:`h-3 w-3 rounded-full ${e.isOverdue?"bg-destructive animate-pulse":"bg-success"}`}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-foreground",children:e.name}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.phone?(0,t.jsx)("button",{onClick:()=>y(e),className:"text-primary hover:underline",children:e.phone}):"No phone"," Â· ",e.email]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:`text-sm font-medium ${e.isOverdue?"text-destructive":"text-foreground"}`,children:e.nextFollowUp}),(0,t.jsx)("p",{className:`text-xs ${e.isOverdue?"text-destructive":"text-muted-foreground"}`,children:e.isOverdue?`${Math.abs(e.daysUntil)} day${1!==Math.abs(e.daysUntil)?"s":""} overdue`:0===e.daysUntil?"Due today":`In ${e.daysUntil} day${1!==e.daysUntil?"s":""}`})]}),(0,t.jsx)(i.Badge,{variant:e.isOverdue?"destructive":"secondary",className:"text-xs",children:e.status})]})]}),e.notes&&(0,t.jsx)("p",{className:"mt-2 text-xs text-muted-foreground ml-6",children:e.notes}),(0,t.jsxs)("div",{className:"mt-3 ml-6 flex gap-2",children:[(0,t.jsxs)(d.Button,{size:"sm",variant:"outline",className:"h-7 text-xs gap-1.5",onClick:()=>y(e),children:[(0,t.jsx)(c.Phone,{className:"h-3 w-3"}),"Call Now"]}),(0,t.jsxs)(d.Button,{size:"sm",variant:"outline",className:"h-7 text-xs gap-1.5",onClick:()=>N(e.id,e.name),disabled:p.isPending,children:[(0,t.jsx)(l.CheckCircle,{className:"h-3 w-3"}),"Mark Done"]})]})]},e.id)),0===k.length&&(0,t.jsxs)("div",{className:"rounded-xl border border-dashed border-border p-12 text-center",children:[(0,t.jsx)(l.CheckCircle,{className:"h-8 w-8 mx-auto text-success mb-2"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"No follow-ups in this view. Nice work!"})]})]})]})}e.s(["default",()=>h])}]);