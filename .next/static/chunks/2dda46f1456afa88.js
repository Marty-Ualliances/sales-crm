(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,19455,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(91918),a=e.i(25913),d=e.i(75157);let l=(0,a.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef(({className:e,variant:r,size:a,asChild:o=!1,...i},n)=>{let c=o?s.Slot:"button";return(0,t.jsx)(c,{className:(0,d.cn)(l({variant:r,size:a,className:e})),ref:n,...i})});o.displayName="Button",e.s(["Button",()=>o])},31278,e=>{"use strict";let t=(0,e.i(75254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},69638,e=>{"use strict";let t=(0,e.i(75254).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],69638)},63209,e=>{"use strict";let t=(0,e.i(75254).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],63209)},72520,e=>{"use strict";let t=(0,e.i(75254).default)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);e.s(["ArrowRight",()=>t],72520)},40160,e=>{"use strict";let t=(0,e.i(75254).default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);e.s(["Download",()=>t],40160)},69074,e=>{"use strict";let t=(0,e.i(75254).default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);e.s(["Upload",()=>t],69074)},45439,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(69074),a=e.i(94918),d=e.i(69638),l=e.i(63209),o=e.i(72520),i=e.i(31278),n=e.i(40160),c=e.i(19455),m=e.i(87486);e.i(64862);var x=e.i(9085);let u=["Date","Source","Name","Title","Company Name","Email","Work Direct Phone","Home Phone","Mobile Phone","Corporate Phone","Other Phone","Company Phone","Employees","Person LinkedIn URL","Website","Company LinkedIn URL","City","State","Assigned","Status","Notes"];function h(){let[e,h]=(0,r.useState)("upload"),[p,f]=(0,r.useState)([]),[g,b]=(0,r.useState)([]),[v,y]=(0,r.useState)(!1),[j,N]=(0,r.useState)(null),[w,k]=(0,r.useState)(null),C=(0,x.useImportCSV)(),S=e=>{let t=[],r="",s=!1;for(let a=0;a<e.length;a++){let d=e[a];'"'===d?s&&'"'===e[a+1]?(r+='"',a++):s=!s:","!==d||s?r+=d:(t.push(r.trim()),r="")}return t.push(r.trim()),t},D=e=>{N(e);let t=new FileReader;t.onload=e=>{let t,r;f(r=S((t=(e.target?.result).trim().split(/\r?\n/))[0]).map(e=>e.replace(/^"|"$/g,""))),b(t.slice(1).filter(e=>e.trim()).map(e=>{let t=S(e).map(e=>e.replace(/^"|"$/g,"")),s={};return r.forEach((e,r)=>s[e]=t[r]||""),s})),h("preview")},t.readAsText(e)},B=(0,r.useCallback)(e=>{e.preventDefault(),y(!1);let t=e.dataTransfer.files[0];t?.name.endsWith(".csv")&&D(t)},[]),L=async()=>{if(j){h("importing");try{let e=await C.mutateAsync(j);k(e),h("done")}catch(e){k({imported:0,errors:1,errorDetails:[{row:0,error:e.message}]}),h("done")}}};return(0,t.jsxs)("div",{className:"space-y-6 max-w-4xl",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:"CSV Upload"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Import leads in bulk from a CSV file"})]}),(0,t.jsxs)(c.Button,{variant:"outline",size:"sm",onClick:()=>{let e=new Blob([u.join(",")+"\n"],{type:"text/csv"}),t=URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download="leads_template.csv",r.click(),URL.revokeObjectURL(t)},children:[(0,t.jsx)(n.Download,{className:"h-4 w-4 mr-2"}),"Download Template"]})]}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:["Upload","Preview","Importing","Done"].map((r,s)=>{let a=["upload","preview","importing","done"].indexOf(e);return(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:`flex h-7 w-7 items-center justify-center rounded-full text-xs font-medium ${s<=a?"gradient-primary text-primary-foreground":"bg-muted text-muted-foreground"}`,children:s<a?(0,t.jsx)(d.CheckCircle,{className:"h-4 w-4"}):s+1}),(0,t.jsx)("span",{className:`text-sm hidden sm:inline ${s<=a?"text-foreground":"text-muted-foreground"}`,children:r}),s<3&&(0,t.jsx)(o.ArrowRight,{className:"h-4 w-4 text-muted-foreground"})]},r)})}),"upload"===e&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{onDragOver:e=>{e.preventDefault(),y(!0)},onDragLeave:()=>y(!1),onDrop:B,className:`rounded-xl border-2 border-dashed p-12 text-center transition-colors ${v?"border-primary bg-accent":"border-border bg-card"}`,children:[(0,t.jsx)(s.Upload,{className:"h-10 w-10 mx-auto mb-4 text-muted-foreground"}),(0,t.jsx)("p",{className:"text-lg font-medium text-foreground mb-2",children:"Drop your CSV file here"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"or click to browse"}),(0,t.jsx)("input",{type:"file",accept:".csv",className:"hidden",id:"csv-input",onChange:e=>e.target.files?.[0]&&D(e.target.files[0])}),(0,t.jsxs)(c.Button,{onClick:()=>document.getElementById("csv-input")?.click(),children:[(0,t.jsx)(a.FileSpreadsheet,{className:"h-4 w-4 mr-2"}),"Select CSV File"]})]}),(0,t.jsxs)("div",{className:"rounded-xl border border-border bg-card p-4 shadow-card",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-foreground mb-2",children:"Expected CSV Columns"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1.5",children:u.map(e=>(0,t.jsx)(m.Badge,{variant:"secondary",className:"text-xs",children:e},e))}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-2",children:'Column headers are auto-matched. Only "Name" is required — all other fields are optional.'})]})]}),"preview"===e&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"rounded-xl border border-border bg-card shadow-card overflow-hidden",children:[(0,t.jsxs)("div",{className:"px-4 py-3 border-b border-border flex items-center justify-between",children:[(0,t.jsxs)("span",{className:"text-sm font-semibold text-foreground",children:["Preview (",g.length," leads)"]}),(0,t.jsxs)(m.Badge,{variant:"secondary",children:[p.length," columns detected"]})]}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-border bg-secondary/50",children:[p.slice(0,8).map(e=>(0,t.jsx)("th",{className:"text-left px-4 py-2 text-xs font-medium text-muted-foreground whitespace-nowrap",children:e},e)),p.length>8&&(0,t.jsx)("th",{className:"text-left px-4 py-2 text-xs font-medium text-muted-foreground",children:"..."})]})}),(0,t.jsx)("tbody",{children:g.slice(0,5).map((e,r)=>(0,t.jsxs)("tr",{className:"border-b border-border/50",children:[p.slice(0,8).map(r=>(0,t.jsx)("td",{className:"px-4 py-2 text-muted-foreground whitespace-nowrap max-w-[150px] truncate",children:e[r]||"—"},r)),p.length>8&&(0,t.jsx)("td",{className:"px-4 py-2 text-muted-foreground",children:"..."})]},r))})]})}),g.length>5&&(0,t.jsxs)("div",{className:"px-4 py-2 text-xs text-muted-foreground border-t border-border",children:["...and ",g.length-5," more rows"]})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)(c.Button,{variant:"outline",onClick:()=>{h("upload"),N(null),b([]),f([])},children:"Back"}),(0,t.jsxs)(c.Button,{onClick:L,className:"gradient-primary border-0",children:["Import ",g.length," Leads",(0,t.jsx)(o.ArrowRight,{className:"h-4 w-4 ml-2"})]})]})]}),"importing"===e&&(0,t.jsxs)("div",{className:"rounded-xl border border-border bg-card p-12 text-center shadow-card",children:[(0,t.jsx)(i.Loader2,{className:"h-12 w-12 mx-auto mb-4 text-primary animate-spin"}),(0,t.jsx)("h2",{className:"text-xl font-bold text-foreground mb-2",children:"Importing Leads..."}),(0,t.jsxs)("p",{className:"text-muted-foreground",children:["Processing ",g.length," rows. Please wait."]})]}),"done"===e&&w&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:`rounded-xl border p-8 text-center ${w.imported>0?"border-success/30 bg-success/5":"border-destructive/30 bg-destructive/5"}`,children:[w.imported>0?(0,t.jsx)(d.CheckCircle,{className:"h-12 w-12 mx-auto mb-4 text-success"}):(0,t.jsx)(l.AlertCircle,{className:"h-12 w-12 mx-auto mb-4 text-destructive"}),(0,t.jsx)("h2",{className:"text-xl font-bold text-foreground mb-2",children:w.imported>0?"Import Complete!":"Import Failed"}),(0,t.jsxs)("p",{className:"text-muted-foreground mb-1",children:[w.imported," leads imported successfully."]}),w.errors>0&&(0,t.jsxs)("p",{className:"text-sm text-destructive",children:[w.errors," rows had errors."]})]}),w.errorDetails&&w.errorDetails.length>0&&(0,t.jsxs)("div",{className:"rounded-xl border border-destructive/20 bg-card p-4 shadow-card",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-destructive mb-2",children:"Error Details"}),(0,t.jsx)("div",{className:"space-y-1 max-h-40 overflow-y-auto",children:w.errorDetails.map((e,r)=>(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(0,t.jsxs)("span",{className:"text-destructive font-medium",children:["Row ",e.row,":"]})," ",e.error]},r))})]}),(0,t.jsx)(c.Button,{onClick:()=>{h("upload"),N(null),b([]),f([]),k(null)},children:"Upload Another File"})]})]})}e.s(["default",()=>h])}]);