module.exports=[24287,a=>{"use strict";var b=a.i(87924),c=a.i(50944),d=a.i(38246),e=a.i(210),f=a.i(63519),g=a.i(92258),h=a.i(46842),i=a.i(41675),j=a.i(4720),k=a.i(69520),l=a.i(96221),m=a.i(67900),n=a.i(70106);let o=(0,n.default)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),p=(0,n.default)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);var q=a.i(85911),r=a.i(60246),s=a.i(16201),t=a.i(19272),u=a.i(92759);let v=(0,n.default)("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var w=a.i(73570),x=a.i(99570);a.i(84225);var y=a.i(80317),z=a.i(80873),A=a.i(89822),B=a.i(86570),C=a.i(60986),D=a.i(23292),E=a.i(72131);function F(a){return`tel:${a.replace(/[^+\d]/g,"")}`}let G={call:f.Phone,"follow-up":i.Calendar,note:j.FileText,"status-change":k.RefreshCw,email:u.Send,linkedin:q.Linkedin,"cadence-touch":s.CheckCircle},H={call:"bg-success/10 text-success","follow-up":"bg-warning/10 text-warning",note:"bg-muted text-muted-foreground","status-change":"bg-primary/10 text-primary",email:"bg-blue-100/50 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400",linkedin:"bg-sky-100/50 text-sky-600 dark:bg-sky-900/30 dark:text-sky-400","cadence-touch":"bg-purple-100 text-purple-600 dark:bg-purple-900/30 dark:text-purple-400"};function I(){let a,n=(0,c.useParams)(),s=n?.leadId,{data:u,isLoading:I}=(0,y.useLead)(s??""),{data:J=[]}=(0,z.useCalls)();(0,y.useCompleteFollowUp)();let K=(0,y.useUpdateLead)(),L=(0,z.useCreateCall)(),{user:M}=(0,A.useAuth)(),{data:N=[]}=(0,y.useLeads)(),[O,P]=(0,E.useState)(!1),[Q,R]=(0,E.useState)(""),[S,T]=(0,E.useState)(null),[U,V]=(0,E.useState)(""),[W,X]=(0,E.useState)(""),[Y,Z]=(0,E.useState)("team"),$=(0,c.usePathname)()??"",_=$.startsWith("/sdr")?"/sdr":$.startsWith("/hr")?"/hr":$.startsWith("/leadgen")?"/leadgen":"/admin";if(I)return(0,b.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,b.jsx)(l.Loader2,{className:"h-8 w-8 animate-spin text-primary"})});if(!u)return(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-20",children:[(0,b.jsx)("h2",{className:"text-xl font-bold text-foreground mb-2",children:"Lead not found"}),(0,b.jsx)(d.default,{href:`${_}/leads`,children:(0,b.jsx)(x.Button,{variant:"outline",children:"Back to Leads"})})]});let aa=J.filter(a=>a.leadId===u.id||a.leadId===u._id),ab=async a=>{let b=a||u.phone||u.companyPhone;if(!b)return void D.toast.error("No phone number available");try{await L.mutateAsync({leadId:u.id||u._id,leadName:u.name,agentName:M?.name||"Unknown",date:new Date,time:new Date().toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),duration:"0 min",status:"Completed",notes:"Call initiated from Lead Details",hasRecording:!1})}catch(a){console.error("Failed to log call:",a)}window.location.href=F(b),D.toast.success("Call logged and opening dialer...")},ac=["Qualified","Meeting Booked","Meeting Completed","Proposal Sent","Negotiation"],ad=async a=>{if(ac.includes(a)){V(""),X(""),T({status:a});return}try{await K.mutateAsync({id:u.id,data:{status:a}}),D.toast.success(`Status changed to ${a}`)}catch{D.toast.error("Failed to update status")}},ae=async()=>{if(S)try{let a={status:S.status};U&&(a.nextFollowUp=U),W&&(a.activities=[...u.activities||[],{type:"note",description:`Next step: ${W}`,timestamp:new Date().toISOString(),agent:u.assignedAgent||"User"}]),await K.mutateAsync({id:u.id,data:a}),D.toast.success(`Status changed to ${S.status}`)}catch{D.toast.error("Failed to update status")}finally{T(null)}},af=async()=>{try{let a="Current User";try{let b=localStorage.getItem("insurelead_user");b&&(a=JSON.parse(b).name||"Current User")}catch(a){}let b={type:"note",description:Q,timestamp:new Date().toISOString(),agent:a};await K.mutateAsync({id:u.id,data:{activities:[b,...u.activities||[]]}}),P(!1),R(""),D.toast.success("Notes saved")}catch{D.toast.error("Failed to save notes")}},ag=async a=>{try{await K.mutateAsync({id:u.id,data:a}),D.toast.success("Updated")}catch{D.toast.error("Failed to update")}},ah=async a=>{let b=u.qualification||{rightPerson:!1,realNeed:!1,timing:!1,qualifiedAt:null,qualifiedBy:""},c={...b,[a]:!b[a]};c.rightPerson&&c.realNeed&&c.timing&&!b.qualifiedAt&&(c.qualifiedAt=new Date().toISOString(),c.qualifiedBy=u.assignedAgent),await ag({qualification:c})},ai=(0,B.checkQualityGate)(u);(0,C.getCadenceTasks)(u.cadence),u.cadence&&C.CADENCE_TEMPLATES.find(a=>a.key===u.cadence.type);let aj=[{label:"Work Direct",value:u.workDirectPhone},{label:"Mobile",value:u.mobilePhone},{label:"Home",value:u.homePhone},{label:"Corporate",value:u.corporatePhone},{label:"Company",value:u.companyPhone},{label:"Other",value:u.otherPhone}].filter(a=>a.value),ak=("Meeting Completed"===u.status||"Negotiation"===u.status)&&!u.nextFollowUp,al=[...u.activities||[],...(u.stageHistory||[]).map((a,b)=>({id:`sh-${b}-${a.enteredAt}`,type:"status-change",description:`Status changed to ${a.stage}`,timestamp:a.enteredAt,agent:a.agent||"System"}))].sort((a,b)=>new Date(b.timestamp).getTime()-new Date(a.timestamp).getTime()),am=al.filter(a=>"note"===a.type),an=al.filter(a=>"note"!==a.type);return(0,b.jsxs)("div",{className:"space-y-6",children:[ak&&(0,b.jsxs)("div",{className:"flex items-center gap-3 rounded-xl border border-amber-200 bg-amber-50 dark:bg-amber-950/20 dark:border-amber-900/40 px-4 py-3",children:[(0,b.jsx)(w.AlertTriangle,{className:"h-4 w-4 text-amber-600 shrink-0"}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-sm font-semibold text-amber-800 dark:text-amber-300",children:"No next step set"}),(0,b.jsxs)("p",{className:"text-xs text-amber-700 dark:text-amber-400",children:["This lead is in ",(0,b.jsx)("strong",{children:u.status})," but has no follow-up date. Set one below to keep the deal moving."]})]})]}),S&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-foreground/40 backdrop-blur-sm p-4",children:(0,b.jsxs)("div",{className:"w-full max-w-md rounded-2xl border border-border bg-card p-6 shadow-xl space-y-4",children:[(0,b.jsx)("h2",{className:"text-lg font-bold text-foreground",children:"Set Next Step"}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Moving to ",(0,b.jsx)("span",{className:"font-semibold text-foreground",children:S.status})," — define what happens next to keep momentum."]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-muted-foreground mb-1",children:"Follow-up Date"}),(0,b.jsx)("input",{type:"date",value:U,onChange:a=>V(a.target.value),className:"w-full h-9 rounded-lg border border-input bg-background px-3 text-sm text-foreground"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-muted-foreground mb-1",children:"Next Step Note"}),(0,b.jsx)("input",{value:W,onChange:a=>X(a.target.value),placeholder:"e.g. Send proposal, Book demo, Follow up on budget...",className:"w-full h-9 rounded-lg border border-input bg-background px-3 text-sm text-foreground placeholder:text-muted-foreground"})]})]}),(0,b.jsxs)("div",{className:"flex gap-2 justify-end pt-2",children:[(0,b.jsx)(x.Button,{variant:"outline",onClick:()=>T(null),children:"Skip"}),(0,b.jsx)(x.Button,{onClick:ae,disabled:K.isPending,children:K.isPending?"Saving...":"Confirm & Save"})]})]})}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(d.default,{href:`${_}/leads`,children:(0,b.jsx)(x.Button,{variant:"ghost",size:"icon",className:"h-9 w-9",children:(0,b.jsx)(e.ArrowLeft,{className:"h-4 w-4"})})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-xl sm:text-2xl font-bold text-foreground",children:u.name}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:[u.title&&`${u.title} \xb7 `,u.companyName||"Lead Details"]})]})]}),(0,b.jsx)("div",{className:"flex gap-2 ml-12 sm:ml-0",children:u.phone&&(0,b.jsxs)(x.Button,{size:"sm",onClick:()=>ab(u.phone),children:[(0,b.jsx)(t.PhoneCall,{className:"h-4 w-4 mr-1"}),"Call Now"]})})]}),(0,b.jsxs)("div",{className:"rounded-xl border border-border bg-card shadow-card p-4 sm:p-8",children:[(0,b.jsxs)("div",{className:"flex items-start gap-4 mb-5",children:[(0,b.jsx)("div",{className:"flex h-14 w-14 items-center justify-center rounded-2xl bg-primary/10 shrink-0",children:(0,b.jsx)(m.Building2,{className:"h-7 w-7 text-primary"})}),(0,b.jsx)("div",{className:"min-w-0 flex-1",children:(0,b.jsx)("h3",{className:"text-xl font-bold text-foreground truncate",children:u.companyName||"Unknown Company"})}),(0,b.jsx)("select",{value:u.status,onChange:a=>ad(a.target.value),className:`cursor-pointer appearance-none outline-none inline-flex items-center rounded-full border px-3 py-1.5 text-xs font-semibold shrink-0 ${(0,B.getStageBadgeClass)(u.status)}`,style:{paddingRight:"1rem"},children:B.PIPELINE_STAGES.map(a=>(0,b.jsx)("option",{value:a.key,className:"bg-background text-foreground",children:a.label},a.key))})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 pt-5 border-t border-border",children:[u.employees&&(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"flex h-9 w-9 items-center justify-center rounded-lg bg-secondary shrink-0",children:(0,b.jsx)(r.Users,{className:"h-4 w-4 text-muted-foreground"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Employees"}),(0,b.jsx)("p",{className:"text-sm font-semibold text-foreground",children:u.employees})]})]}),u.website&&(0,b.jsxs)("div",{className:"flex items-center gap-3 min-w-0",children:[(0,b.jsx)("div",{className:"flex h-9 w-9 items-center justify-center rounded-lg bg-secondary shrink-0",children:(0,b.jsx)(p,{className:"h-4 w-4 text-muted-foreground"})}),(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Website"}),(0,b.jsx)("a",{href:u.website,target:"_blank",rel:"noopener noreferrer",className:"text-sm font-semibold text-primary hover:underline truncate block",children:u.website.replace(/^https?:\/\//,"")})]})]}),u.companyLinkedinUrl&&(0,b.jsxs)("div",{className:"flex items-center gap-3 min-w-0",children:[(0,b.jsx)("div",{className:"flex h-9 w-9 items-center justify-center rounded-lg bg-secondary shrink-0",children:(0,b.jsx)(q.Linkedin,{className:"h-4 w-4 text-muted-foreground"})}),(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"LinkedIn"}),(0,b.jsx)("a",{href:u.companyLinkedinUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sm font-semibold text-primary hover:underline truncate block",children:"Company Page"})]})]}),u.companyPhone&&(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"flex h-9 w-9 items-center justify-center rounded-lg bg-secondary shrink-0",children:(0,b.jsx)(f.Phone,{className:"h-4 w-4 text-muted-foreground"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Company Phone"}),(0,b.jsx)("button",{onClick:()=>ab(u.companyPhone),className:"text-sm font-semibold text-primary hover:underline",children:u.companyPhone})]})]}),(u.address||u.city||u.state)&&(0,b.jsxs)("div",{className:"flex items-center gap-3 col-span-2 sm:col-span-4",children:[(0,b.jsx)("div",{className:"flex h-9 w-9 items-center justify-center rounded-lg bg-secondary shrink-0",children:(0,b.jsx)(o,{className:"h-4 w-4 text-muted-foreground"})}),(0,b.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Address"}),(0,b.jsx)("p",{className:"text-sm font-semibold text-foreground truncate",children:[u.address,u.city,u.state].filter(Boolean).join(", ")})]})]})]})]}),(0,b.jsxs)("div",{className:"mt-8",children:[(0,b.jsx)("div",{className:"border-b border-border",children:(0,b.jsxs)("div",{className:"flex space-x-8 px-2",children:[(0,b.jsxs)("button",{onClick:()=>Z("team"),className:`pb-4 text-sm font-medium transition-colors relative ${"team"===Y?"text-primary":"text-muted-foreground hover:text-foreground"}`,children:["Team & Qualifications","team"===Y&&(0,b.jsx)("span",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-primary rounded-t-full"})]}),(0,b.jsxs)("button",{onClick:()=>Z("activity"),className:`pb-4 text-sm font-medium transition-colors relative ${"activity"===Y?"text-primary":"text-muted-foreground hover:text-foreground"}`,children:["Activity & Notes","activity"===Y&&(0,b.jsx)("span",{className:"absolute bottom-0 left-0 w-full h-0.5 bg-primary rounded-t-full"})]})]})}),(0,b.jsx)("div",{className:"pt-6",children:"team"===Y?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"rounded-xl border border-border bg-card shadow-card p-4 sm:p-8 space-y-5",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"flex h-14 w-14 items-center justify-center rounded-full bg-primary text-primary-foreground text-lg font-bold shrink-0",children:u.name?.split(" ").map(a=>a[0]).join("").slice(0,2)||"LD"}),(0,b.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-foreground",children:u.name}),u.title&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-0.5",children:u.title})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 pt-5 border-t border-border",children:[u.email&&(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"flex h-9 w-9 items-center justify-center rounded-lg bg-secondary shrink-0",children:(0,b.jsx)(g.Mail,{className:"h-4 w-4 text-muted-foreground"})}),(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Email"}),(0,b.jsx)("p",{className:"text-sm font-medium text-foreground truncate",children:u.email})]})]}),u.assignedAgent&&(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"flex h-9 w-9 items-center justify-center rounded-lg bg-secondary shrink-0",children:(0,b.jsx)(h.User,{className:"h-4 w-4 text-muted-foreground"})}),(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Assigned Agent"}),(0,b.jsx)("p",{className:"text-sm font-medium text-foreground truncate",children:u.assignedAgent})]})]}),u.date&&(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"flex h-9 w-9 items-center justify-center rounded-lg bg-secondary shrink-0",children:(0,b.jsx)(i.Calendar,{className:"h-4 w-4 text-muted-foreground"})}),(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Date Added"}),(0,b.jsx)("p",{className:"text-sm font-medium text-foreground",children:u.date})]})]}),u.source&&(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"flex h-9 w-9 items-center justify-center rounded-lg bg-secondary shrink-0",children:(0,b.jsx)(k.RefreshCw,{className:"h-4 w-4 text-muted-foreground"})}),(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Source"}),(0,b.jsx)("p",{className:"text-sm font-medium text-foreground",children:u.source})]})]})]})]}),u.companyName&&(a=N.filter(a=>a.companyName===u.companyName&&(a.id||a._id)!==(u.id||u._id)),(0,b.jsxs)("div",{className:"rounded-xl border border-border bg-card shadow-card p-6 space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-foreground",children:"Company Team"}),(0,b.jsxs)("span",{className:"text-xs text-muted-foreground",children:[a.length," contact",1!==a.length?"s":""]})]}),a.length>0?(0,b.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(a=>(0,b.jsxs)(d.default,{href:`${_}/leads/${a.id||a._id}`,className:"flex items-center gap-3 p-3 rounded-lg border border-border hover:bg-secondary/50 transition-colors",children:[(0,b.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-secondary text-foreground text-sm font-medium shrink-0",children:a.name?.split(" ").map(a=>a[0]).join("").slice(0,2)||"??"}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-sm font-semibold text-foreground truncate",children:a.name}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:a.title||"No title"})]}),(0,b.jsx)("span",{className:`inline-flex items-center rounded-full border px-2 py-0.5 text-[10px] font-medium shrink-0 ${(0,B.getStageBadgeClass)(a.status)}`,children:a.status})]},a.id||a._id))}):(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["No other contacts from ",u.companyName," yet."]})]})),(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"rounded-xl border border-border bg-card shadow-card p-6 space-y-4",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-foreground",children:"Classification & Qualification"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-1.5",children:"Priority"}),(0,b.jsx)("div",{className:"flex gap-1.5",children:B.PRIORITIES.map(a=>(0,b.jsx)("button",{onClick:()=>ag({priority:a.key}),className:`inline-flex items-center rounded-full border px-3 py-1 text-xs font-semibold transition-all ${u.priority===a.key?a.badgeClass+" ring-2 ring-offset-1 ring-current":"bg-muted/50 text-muted-foreground border-border hover:bg-muted"}`,children:a.label},a.key))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-1.5",children:"Segment"}),(0,b.jsxs)("select",{value:u.segment||"",onChange:a=>ag({segment:a.target.value}),className:"w-full h-8 rounded-lg border border-input bg-background px-2 text-sm text-foreground",children:[(0,b.jsx)("option",{value:"",children:"— Select —"}),B.SEGMENTS.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-1.5",children:"Source Channel"}),(0,b.jsxs)("select",{value:u.sourceChannel||"",onChange:a=>ag({sourceChannel:a.target.value}),className:"w-full h-8 rounded-lg border border-input bg-background px-2 text-sm text-foreground",children:[(0,b.jsx)("option",{value:"",children:"— Select —"}),B.SOURCE_CHANNELS.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]})]}),(0,b.jsxs)("div",{className:"pt-3 border-t border-border",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[ai.pass?(0,b.jsx)(v,{className:"h-4 w-4 text-emerald-500"}):(0,b.jsx)(w.AlertTriangle,{className:"h-4 w-4 text-amber-500"}),(0,b.jsxs)("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:["Quality Gate ",ai.pass?"✓ Passed":`— ${ai.missing.length} missing`]})]}),!ai.pass&&(0,b.jsx)("ul",{className:"text-xs text-amber-600 dark:text-amber-400 space-y-0.5 ml-6 list-disc",children:ai.missing.map(a=>(0,b.jsx)("li",{children:a},a))})]}),(0,b.jsxs)("div",{className:"pt-3 border-t border-border",children:[(0,b.jsx)("p",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide mb-2",children:"3 Yes Rule"}),[{key:"rightPerson",label:"Right Person — Decision maker?"},{key:"realNeed",label:"Real Need — Admin/quoting/COIs pain?"},{key:"timing",label:"Timing — Open to change 30-90 days?"}].map(a=>(0,b.jsxs)("label",{className:"flex items-center gap-2.5 py-1.5 cursor-pointer group",children:[(0,b.jsx)("input",{type:"checkbox",checked:u.qualification?.[a.key]||!1,onChange:()=>ah(a.key),className:"h-4 w-4 rounded border-border text-primary focus:ring-primary"}),(0,b.jsx)("span",{className:"text-sm text-foreground group-hover:text-primary transition-colors",children:a.label})]},a.key)),u.qualification?.qualifiedAt&&(0,b.jsxs)("p",{className:"text-xs text-emerald-600 dark:text-emerald-400 mt-1",children:["✓ Qualified on ",new Date(u.qualification.qualifiedAt).toLocaleDateString()," by ",u.qualification.qualifiedBy]})]})]}),aj.length>0&&(0,b.jsxs)("div",{className:"rounded-xl border border-border bg-card shadow-card p-6 space-y-3",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-foreground",children:"Phone Numbers"}),aj.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-secondary",children:(0,b.jsx)(f.Phone,{className:"h-4 w-4 text-muted-foreground"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:a.label}),(0,b.jsx)("a",{href:F(a.value),className:"text-sm font-medium text-primary hover:underline",children:a.value})]})]}),(0,b.jsx)("a",{href:F(a.value),title:"Call this number",children:(0,b.jsx)(x.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-primary",children:(0,b.jsx)(t.PhoneCall,{className:"h-3.5 w-3.5"})})})]},a.label))]})]})]}):(0,b.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"rounded-xl border border-border bg-card shadow-card p-6 space-y-4",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-foreground",children:"Add Note"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("textarea",{value:Q,onChange:a=>R(a.target.value),placeholder:"Type a note (visible across all panels)...",className:"w-full h-24 rounded-md border border-input bg-background px-3 py-2 text-sm text-foreground resize-none focus:outline-none focus:ring-2 focus:ring-primary"}),(0,b.jsx)("div",{className:"flex justify-end",children:(0,b.jsx)(x.Button,{size:"sm",onClick:af,disabled:!Q.trim(),children:"Post Note"})})]})]}),(0,b.jsxs)("div",{className:"rounded-xl border border-border bg-card shadow-card p-6 space-y-4",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-foreground",children:"Global Notes History"}),(0,b.jsxs)("div",{className:"space-y-4",children:[am.map(a=>(0,b.jsxs)("div",{className:"p-4 bg-secondary/30 rounded-lg border border-border/50",children:[(0,b.jsx)("p",{className:"text-sm text-foreground whitespace-pre-wrap",children:a.description}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-2 font-medium flex items-center gap-1.5",children:[(0,b.jsx)("span",{className:"flex h-4 w-4 items-center justify-center rounded-full bg-primary/20 text-[8px] text-primary",children:a.agent?.[0]||"?"}),a.agent," · ",new Date(a.timestamp).toLocaleString()]})]},a.id||a.timestamp)),0===am.length&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"No notes recorded yet."})]})]})]}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"rounded-xl border border-border bg-card shadow-card p-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Activity History"}),(0,b.jsxs)("div",{className:"space-y-4 max-h-[400px] overflow-y-auto pr-2",children:[an.map(a=>{let c=G[a.type]||j.FileText;return(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)("div",{className:`flex h-8 w-8 shrink-0 items-center justify-center rounded-lg ${H[a.type]||"bg-muted text-muted-foreground"}`,children:(0,b.jsx)(c,{className:"h-4 w-4"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-sm text-foreground",children:a.description}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-0.5",children:[a.agent," · ",new Date(a.timestamp).toLocaleString()]})]})]},a.id||a.timestamp)}),0===an.length&&(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"No activities recorded yet."})]})]}),(0,b.jsxs)("div",{className:"rounded-xl border border-border bg-card shadow-card p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-foreground",children:"Call Logs"}),(0,b.jsxs)("span",{className:"text-sm text-muted-foreground",children:[aa.length," calls"]})]}),aa.length>0?(0,b.jsx)("div",{className:"space-y-3 max-h-[300px] overflow-y-auto pr-2",children:aa.map(a=>(0,b.jsxs)(d.default,{href:`${_}/calls/${a.id}`,className:"flex items-center gap-3 p-3 rounded-lg hover:bg-secondary/50 transition-colors",children:[(0,b.jsx)("div",{className:`flex h-8 w-8 items-center justify-center rounded-lg ${"Completed"===a.status?"bg-success/10 text-success":"Missed"===a.status?"bg-destructive/10 text-destructive":"bg-warning/10 text-warning"}`,children:(0,b.jsx)(f.Phone,{className:"h-4 w-4"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("p",{className:"text-sm font-medium text-foreground",children:[a.date," at ",a.time," — ",a.duration]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:a.notes})]}),(0,b.jsx)("span",{className:`inline-flex items-center rounded-full border px-2 py-0.5 text-xs font-medium ${"Completed"===a.status?"bg-success/10 text-success border-success/20":"Missed"===a.status?"bg-destructive/10 text-destructive border-destructive/20":"bg-warning/10 text-warning border-warning/20"}`,children:a.status})]},a.id))}):(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"No calls recorded yet."})]})]})]})})]})]})}a.s(["default",()=>I],24287)}];

//# sourceMappingURL=src_features_leads_pages_LeadDetailPage_tsx_8c6c2c8b._.js.map