module.exports=[99570,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(11011),e=a.i(187),f=a.i(68114);let g=(0,e.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),h=c.forwardRef(({className:a,variant:c,size:e,asChild:h=!1,...i},j)=>{let k=h?d.Slot:"button";return(0,b.jsx)(k,{className:(0,f.cn)(g({variant:c,size:e,className:a})),ref:j,...i})});h.displayName="Button",a.s(["Button",()=>h])},96221,a=>{"use strict";let b=(0,a.i(70106).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],96221)},16201,a=>{"use strict";let b=(0,a.i(70106).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);a.s(["CheckCircle",()=>b],16201)},89833,a=>{"use strict";var b=a.i(87924);a.i(84225);var c=a.i(80317),d=a.i(80873),e=a.i(89822),f=a.i(86304),g=a.i(99570),h=a.i(41710),i=a.i(16201),j=a.i(73570),k=a.i(63519),l=a.i(96221),m=a.i(72131),n=a.i(23292);function o(){let{data:a=[],isLoading:o}=(0,c.useLeads)(),{user:p}=(0,e.useAuth)(),q=(0,c.useCompleteFollowUp)(),r=(0,d.useCreateCall)(),s=new Date,[t,u]=(0,m.useState)("all"),v=a.filter(a=>!a.assignedAgent||a.assignedAgent===p?.name),w=async(a,b)=>{try{await q.mutateAsync(a),n.toast.success(`Follow-up with ${b} marked as done`)}catch{n.toast.error("Failed to mark follow-up as done")}},x=async a=>{try{let b=a.workDirectPhone||a.mobilePhone||a.phone||"";b&&window.open(`tel:${b.replace(/[^+\d]/g,"")}`,"_self"),await r.mutateAsync({leadId:a.id,leadName:a.name,agentName:p?.name||"Unknown",date:new Date,time:new Date().toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),duration:"0 min",status:"Completed",notes:"Call initiated from follow-ups",hasRecording:!1}),n.toast.success(`Call to ${a.name} logged`)}catch{n.toast.error("Failed to log call")}},y=v.filter(a=>a.nextFollowUp&&"Closed Won"!==a.status&&"Closed Lost"!==a.status).map(a=>({...a,isOverdue:new Date(a.nextFollowUp)<s,daysUntil:Math.ceil((new Date(a.nextFollowUp).getTime()-s.getTime())/864e5)})).sort((a,b)=>new Date(a.nextFollowUp).getTime()-new Date(b.nextFollowUp).getTime()),z=y.filter(a=>"overdue"===t?a.isOverdue:"upcoming"!==t||!a.isOverdue),A=y.filter(a=>a.isOverdue).length,B=y.filter(a=>!a.isOverdue).length;return o?(0,b.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,b.jsx)(l.Loader2,{className:"h-8 w-8 animate-spin text-primary"})}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:"My Follow-ups"}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:[y.length," follow-ups pending"]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"rounded-xl border border-border bg-card p-4 shadow-card text-center",children:[(0,b.jsx)(h.Clock,{className:"h-5 w-5 mx-auto mb-2 text-primary"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-foreground",children:y.length}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Total"})]}),(0,b.jsxs)("div",{className:"rounded-xl border border-border bg-card p-4 shadow-card text-center",children:[(0,b.jsx)(j.AlertTriangle,{className:"h-5 w-5 mx-auto mb-2 text-destructive"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-destructive",children:A}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Overdue"})]}),(0,b.jsxs)("div",{className:"rounded-xl border border-border bg-card p-4 shadow-card text-center",children:[(0,b.jsx)(i.CheckCircle,{className:"h-5 w-5 mx-auto mb-2 text-success"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-success",children:B}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Upcoming"})]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(g.Button,{variant:"all"===t?"default":"outline",size:"sm",onClick:()=>u("all"),children:["All (",y.length,")"]}),(0,b.jsxs)(g.Button,{variant:"overdue"===t?"default":"outline",size:"sm",onClick:()=>u("overdue"),children:["Overdue (",A,")"]}),(0,b.jsxs)(g.Button,{variant:"upcoming"===t?"default":"outline",size:"sm",onClick:()=>u("upcoming"),children:["Upcoming (",B,")"]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[z.map(a=>(0,b.jsxs)("div",{className:"rounded-xl border border-border bg-card p-4 shadow-card hover:shadow-card-hover transition-shadow",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:`h-3 w-3 rounded-full ${a.isOverdue?"bg-destructive animate-pulse":"bg-success"}`}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-foreground",children:a.name}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:[a.phone?(0,b.jsx)("button",{onClick:()=>x(a),className:"text-primary hover:underline",children:a.phone}):"No phone"," Â· ",a.email]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:`text-sm font-medium ${a.isOverdue?"text-destructive":"text-foreground"}`,children:a.nextFollowUp}),(0,b.jsx)("p",{className:`text-xs ${a.isOverdue?"text-destructive":"text-muted-foreground"}`,children:a.isOverdue?`${Math.abs(a.daysUntil)} day${1!==Math.abs(a.daysUntil)?"s":""} overdue`:0===a.daysUntil?"Due today":`In ${a.daysUntil} day${1!==a.daysUntil?"s":""}`})]}),(0,b.jsx)(f.Badge,{variant:a.isOverdue?"destructive":"secondary",className:"text-xs",children:a.status})]})]}),a.notes&&(0,b.jsx)("p",{className:"mt-2 text-xs text-muted-foreground ml-6",children:a.notes}),(0,b.jsxs)("div",{className:"mt-3 ml-6 flex gap-2",children:[(0,b.jsxs)(g.Button,{size:"sm",variant:"outline",className:"h-7 text-xs gap-1.5",onClick:()=>x(a),children:[(0,b.jsx)(k.Phone,{className:"h-3 w-3"}),"Call Now"]}),(0,b.jsxs)(g.Button,{size:"sm",variant:"outline",className:"h-7 text-xs gap-1.5",onClick:()=>w(a.id,a.name),disabled:q.isPending,children:[(0,b.jsx)(i.CheckCircle,{className:"h-3 w-3"}),"Mark Done"]})]})]},a.id)),0===z.length&&(0,b.jsxs)("div",{className:"rounded-xl border border-dashed border-border p-12 text-center",children:[(0,b.jsx)(i.CheckCircle,{className:"h-8 w-8 mx-auto text-success mb-2"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"No follow-ups in this view. Nice work!"})]})]})]})}a.s(["default",()=>o])}];

//# sourceMappingURL=_d889a697._.js.map