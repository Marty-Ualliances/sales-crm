module.exports=[34872,a=>{"use strict";var b=a.i(87924);a.i(84225);var c=a.i(30535),d=a.i(80317),e=a.i(63519),f=a.i(16201),g=a.i(41710),h=a.i(60246),i=a.i(87532),j=a.i(17371),k=a.i(92258),l=a.i(81560),m=a.i(96221),n=a.i(33508),o=a.i(24669),p=a.i(90166),q=a.i(50522),r=a.i(86304),s=a.i(99570),t=a.i(14574),u=a.i(66718),v=a.i(70430),w=a.i(80701),x=a.i(72131),y=a.i(23292),z=a.i(89822),A=a.i(46271),B=a.i(86723),C=a.i(74290),D=a.i(1703),E=a.i(14800),F=a.i(91128),G=x,H=a.i(65802);function I(a,b){if("function"==typeof a)return a(b);null!=a&&(a.current=b)}class J extends G.Component{getSnapshotBeforeUpdate(a){let b=this.props.childRef.current;if(b&&a.isPresent&&!this.props.isPresent&&!1!==this.props.pop){let a=b.offsetParent,c=(0,F.isHTMLElement)(a)&&a.offsetWidth||0,d=(0,F.isHTMLElement)(a)&&a.offsetHeight||0,e=this.props.sizeRef.current;e.height=b.offsetHeight||0,e.width=b.offsetWidth||0,e.top=b.offsetTop,e.left=b.offsetLeft,e.right=c-e.width-e.left,e.bottom=d-e.height-e.top}return null}componentDidUpdate(){}render(){return this.props.children}}function K({children:a,isPresent:c,anchorX:d,anchorY:e,root:f,pop:g}){let h=(0,G.useId)(),i=(0,G.useRef)(null),j=(0,G.useRef)({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:k}=(0,G.useContext)(H.MotionConfigContext),l=function(...a){return x.useCallback(function(...a){return b=>{let c=!1,d=a.map(a=>{let d=I(a,b);return c||"function"!=typeof d||(c=!0),d});if(c)return()=>{for(let b=0;b<d.length;b++){let c=d[b];"function"==typeof c?c():I(a[b],null)}}}}(...a),a)}(i,a.props?.ref??a?.ref);return(0,G.useInsertionEffect)(()=>{let{width:a,height:b,top:l,left:m,right:n,bottom:o}=j.current;if(c||!1===g||!i.current||!a||!b)return;let p="left"===d?`left: ${m}`:`right: ${n}`,q="bottom"===e?`bottom: ${o}`:`top: ${l}`;i.current.dataset.motionPopId=h;let r=document.createElement("style");k&&(r.nonce=k);let s=f??document.head;return s.appendChild(r),r.sheet&&r.sheet.insertRule(`
          [data-motion-pop-id="${h}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${b}px !important;
            ${p}px !important;
            ${q}px !important;
          }
        `),()=>{s.contains(r)&&s.removeChild(r)}},[c]),(0,b.jsx)(J,{isPresent:c,childRef:i,sizeRef:j,pop:g,children:!1===g?a:G.cloneElement(a,{ref:l})})}let L=({children:a,initial:c,isPresent:d,onExitComplete:e,custom:f,presenceAffectsLayout:g,mode:h,anchorX:i,anchorY:j,root:k})=>{let l=(0,C.useConstant)(M),m=(0,x.useId)(),n=!0,o=(0,x.useMemo)(()=>(n=!1,{id:m,initial:c,isPresent:d,custom:f,onExitComplete:a=>{for(let b of(l.set(a,!0),l.values()))if(!b)return;e&&e()},register:a=>(l.set(a,!1),()=>l.delete(a))}),[d,l,e]);return g&&n&&(o={...o}),(0,x.useMemo)(()=>{l.forEach((a,b)=>l.set(b,!1))},[d]),x.useEffect(()=>{d||l.size||!e||e()},[d]),a=(0,b.jsx)(K,{pop:"popLayout"===h,isPresent:d,anchorX:i,anchorY:j,root:k,children:a}),(0,b.jsx)(E.PresenceContext.Provider,{value:o,children:a})};function M(){return new Map}var N=a.i(20410);let O=a=>a.key||"";function P(a){let b=[];return x.Children.forEach(a,a=>{(0,x.isValidElement)(a)&&b.push(a)}),b}let Q=({children:a,custom:c,initial:d=!0,onExitComplete:e,presenceAffectsLayout:f=!0,mode:g="sync",propagate:h=!1,anchorX:i="left",anchorY:j="top",root:k})=>{let[l,m]=(0,N.usePresence)(h),n=(0,x.useMemo)(()=>P(a),[a]),o=h&&!l?[]:n.map(O),p=(0,x.useRef)(!0),q=(0,x.useRef)(n),r=(0,C.useConstant)(()=>new Map),s=(0,x.useRef)(new Set),[t,u]=(0,x.useState)(n),[v,w]=(0,x.useState)(n);(0,D.useIsomorphicLayoutEffect)(()=>{p.current=!1,q.current=n;for(let a=0;a<v.length;a++){let b=O(v[a]);o.includes(b)?(r.delete(b),s.current.delete(b)):!0!==r.get(b)&&r.set(b,!1)}},[v,o.length,o.join("-")]);let y=[];if(n!==t){let a=[...n];for(let b=0;b<v.length;b++){let c=v[b],d=O(c);o.includes(d)||(a.splice(b,0,c),y.push(c))}return"wait"===g&&y.length&&(a=y),w(P(a)),u(n),null}let{forceRender:z}=(0,x.useContext)(B.LayoutGroupContext);return(0,b.jsx)(b.Fragment,{children:v.map(a=>{let t=O(a),u=(!h||!!l)&&(n===v||o.includes(t));return(0,b.jsx)(L,{isPresent:u,initial:(!p.current||!!d)&&void 0,custom:c,presenceAffectsLayout:f,mode:g,root:k,onExitComplete:u?void 0:()=>{if(s.current.has(t)||(s.current.add(t),!r.has(t)))return;r.set(t,!0);let a=!0;r.forEach(b=>{b||(a=!1)}),a&&(z?.(),w(q.current),h&&m?.(),e&&e())},anchorX:i,anchorY:j,children:a},t)})})},R={admin:{label:"Admin",color:"bg-primary text-primary-foreground"},sdr:{label:"SDR Agent",color:"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300"},hr:{label:"HR",color:"bg-purple-100 text-purple-700 dark:bg-purple-900 dark:text-purple-300"},leadgen:{label:"Lead Gen",color:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900 dark:text-emerald-300"}};function S(){let a,{data:B=[],isLoading:C}=(0,c.useAgents)(),{data:D=[]}=(0,d.useLeads)(),E=(0,c.useCreateAgent)(),F=(0,c.useDeleteAgent)(),{user:G}=(0,z.useAuth)(),[H,I]=(0,x.useState)(""),[J,K]=(0,x.useState)(!1),[L,M]=(0,x.useState)({name:"",email:"",password:"",role:"sdr"}),[N,O]=(0,x.useState)(null),[P,S]=(0,x.useState)(null),T=G?.role==="admin",U=G?.role==="admin"||G?.role==="hr",V=B.filter(a=>!H||a.name.toLowerCase().includes(H.toLowerCase())||a.email.toLowerCase().includes(H.toLowerCase())),W=async()=>{if(!L.name||!L.email||!L.password)return void y.toast.error("Please fill in all fields including password");try{await E.mutateAsync({name:L.name,email:L.email,password:L.password,role:L.role}),y.toast.success(`${L.name} added â€” credentials sent via email`),K(!1),M({name:"",email:"",password:"",role:"sdr"})}catch(a){y.toast.error(a.message||"Failed to add agent")}},X=async()=>{if(N)try{await F.mutateAsync(N.id),y.toast.success(`${N.name} removed from team`),O(null),P?.id===N.id&&S(null)}catch(a){y.toast.error(a.message||"Failed to delete agent")}};return C?(0,b.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,b.jsx)(m.Loader2,{className:"h-8 w-8 animate-spin text-primary"})}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:"Team Management"}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:[B.length," team members"]})]}),T&&(0,b.jsxs)(t.Dialog,{open:J,onOpenChange:K,children:[(0,b.jsx)(t.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(s.Button,{className:"gradient-primary border-0 gap-2",children:[(0,b.jsx)(j.UserPlus,{className:"h-4 w-4"}),"Add Member"]})}),(0,b.jsxs)(t.DialogContent,{children:[(0,b.jsxs)(t.DialogHeader,{children:[(0,b.jsx)(t.DialogTitle,{children:"Add New Team Member"}),(0,b.jsx)(t.DialogDescription,{children:"Create a new account. Credentials will be sent via email."})]}),(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(v.Label,{htmlFor:"name",children:"Name"}),(0,b.jsx)(u.Input,{id:"name",placeholder:"Full name",value:L.name,onChange:a=>M({...L,name:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(v.Label,{htmlFor:"email",children:"Email"}),(0,b.jsx)(u.Input,{id:"email",type:"email",placeholder:"name@ualliances.com",value:L.email,onChange:a=>M({...L,email:a.target.value})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(v.Label,{htmlFor:"password",children:"Temporary Password"}),(0,b.jsx)(u.Input,{id:"password",type:"password",placeholder:"Min 8 characters",value:L.password,onChange:a=>M({...L,password:a.target.value})}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"This password will be emailed to the user."})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(v.Label,{htmlFor:"role",children:"Role"}),(0,b.jsxs)(w.Select,{value:L.role,onValueChange:a=>M({...L,role:a}),children:[(0,b.jsx)(w.SelectTrigger,{children:(0,b.jsx)(w.SelectValue,{})}),(0,b.jsxs)(w.SelectContent,{children:[(0,b.jsx)(w.SelectItem,{value:"sdr",children:"SDR Agent"}),(0,b.jsx)(w.SelectItem,{value:"leadgen",children:"Lead Gen"}),(0,b.jsx)(w.SelectItem,{value:"hr",children:"HR"}),(0,b.jsx)(w.SelectItem,{value:"admin",children:"Admin"})]})]})]})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)(s.Button,{variant:"outline",onClick:()=>K(!1),children:"Cancel"}),(0,b.jsx)(s.Button,{onClick:W,disabled:E.isPending,className:"gradient-primary border-0",children:E.isPending?"Adding...":"Add Member"})]})]})]})]}),(0,b.jsxs)("div",{className:"relative max-w-md",children:[(0,b.jsx)(i.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)("input",{type:"text",placeholder:"Search by name or email...",value:H,onChange:a=>I(a.target.value),className:"w-full h-10 rounded-lg border border-input bg-background pl-9 pr-3 text-sm text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:border-transparent transition-all"})]}),(0,b.jsxs)("div",{className:"flex gap-6",children:[(0,b.jsx)("div",{className:`${P?"w-1/2 hidden md:block":"w-full"} transition-all duration-300`,children:(0,b.jsxs)("div",{className:"rounded-xl border border-border bg-card shadow-card overflow-hidden",children:[(0,b.jsx)("div",{className:"px-5 py-3 border-b border-border/50 bg-gradient-to-r from-card to-secondary/20",children:(0,b.jsxs)("p",{className:"text-sm font-semibold text-foreground",children:[V.length," Members"]})}),(0,b.jsxs)("div",{className:"divide-y divide-border/50",children:[V.map((a,c)=>{let d=R[a.role]||R.sdr,e=P?.id===a.id;return(0,b.jsxs)("button",{onClick:()=>U&&S(e?null:a),className:`w-full flex items-center gap-4 px-5 py-4 text-left transition-all duration-200 group
                      ${U?"cursor-pointer hover:bg-secondary/40":"cursor-default"}
                      ${e?"bg-primary/5 border-l-2 border-l-primary":"border-l-2 border-l-transparent"}`,children:[(0,b.jsx)("div",{className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full bg-gradient-to-br from-primary to-primary/70 text-primary-foreground text-sm font-medium ring-2 ring-primary/20",children:a.avatar}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-sm font-semibold text-foreground truncate",children:a.name}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:a.email})]}),(0,b.jsx)(r.Badge,{className:`text-xs shrink-0 ${d.color}`,children:d.label}),U&&(0,b.jsx)(q.ChevronRight,{className:`h-4 w-4 text-muted-foreground/50 shrink-0 transition-transform duration-200 ${e?"rotate-90":"group-hover:translate-x-0.5"}`})]},a.id)}),0===V.length&&(0,b.jsx)("div",{className:"px-5 py-12 text-center text-sm text-muted-foreground",children:"No members match your search."})]})]})}),(0,b.jsx)(Q,{mode:"wait",children:P&&U&&(0,b.jsx)(A.motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{duration:.2},className:"w-full md:w-1/2",children:(0,b.jsxs)("div",{className:"rounded-xl border border-border bg-card shadow-card overflow-hidden sticky top-6",children:[(0,b.jsxs)("div",{className:"relative px-6 py-5 bg-gradient-to-br from-primary/10 via-primary/5 to-transparent border-b border-border/50",children:[(0,b.jsx)("button",{onClick:()=>S(null),className:"absolute top-4 right-4 p-1.5 rounded-lg hover:bg-background/80 text-muted-foreground hover:text-foreground transition-colors",children:(0,b.jsx)(n.X,{className:"h-4 w-4"})}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"flex h-14 w-14 items-center justify-center rounded-full bg-gradient-to-br from-primary to-primary/70 text-primary-foreground text-lg font-semibold ring-3 ring-primary/25",children:P.avatar}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-lg font-bold text-foreground",children:P.name}),(0,b.jsx)("div",{className:"flex items-center gap-2 mt-0.5",children:(0,b.jsx)(r.Badge,{className:`text-xs ${R[P.role]?.color}`,children:R[P.role]?.label||P.role})})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1.5 mt-3 text-xs text-muted-foreground",children:[(0,b.jsx)(k.Mail,{className:"h-3 w-3"}),P.email]})]}),(0,b.jsxs)("div",{className:"p-5 space-y-4",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-foreground",children:"Performance"}),(0,b.jsx)("div",{className:"grid grid-cols-2 gap-3",children:[{icon:h.Users,label:"Leads Assigned",value:P.leadsAssigned??0,color:"text-primary"},{icon:e.Phone,label:"Calls Made",value:P.callsMade??0,color:"text-blue-500"},{icon:f.CheckCircle,label:"Follow-ups Done",value:P.followUpsCompleted??0,color:"text-emerald-500"},{icon:g.Clock,label:"Pending",value:P.followUpsPending??0,color:(P.followUpsPending??0)>10?"text-destructive":"text-amber-500"},{icon:o.TrendingUp,label:"Conversion",value:`${P.conversionRate??0}%`,color:"text-purple-500"},{icon:p.DollarSign,label:"Revenue",value:`$${((P.revenueClosed??0)/1e3).toFixed(1)}k`,color:"text-emerald-600"}].map(a=>(0,b.jsxs)("div",{className:"rounded-xl bg-secondary/40 p-3 text-center hover:bg-secondary/60 transition-colors",children:[(0,b.jsx)(a.icon,{className:`h-4 w-4 mx-auto mb-1.5 ${a.color}`}),(0,b.jsx)("p",{className:"text-lg font-bold text-foreground",children:a.value}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:a.label})]},a.label))}),0===(a=D.filter(a=>a.assignedAgent===P.name)).length?null:(0,b.jsxs)("div",{className:"pt-2",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-foreground mb-2",children:"Assigned Leads"}),(0,b.jsxs)("div",{className:"space-y-1.5 max-h-48 overflow-y-auto pr-1",children:[a.slice(0,8).map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between rounded-lg bg-secondary/30 px-3 py-2",children:[(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-foreground truncate",children:a.name}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:a.companyName})]}),(0,b.jsx)(r.Badge,{variant:"outline",className:"text-xs shrink-0 ml-2",children:a.status})]},a.id)),a.length>8&&(0,b.jsxs)("p",{className:"text-xs text-muted-foreground text-center pt-1",children:["+",a.length-8," more leads"]})]})]}),T&&(0,b.jsx)("div",{className:"pt-3 border-t border-border/50",children:(0,b.jsxs)(s.Button,{variant:"outline",size:"sm",className:"w-full text-destructive hover:text-destructive hover:bg-destructive/10 border-destructive/30",onClick:()=>O({id:P.id,name:P.name}),children:[(0,b.jsx)(l.Trash2,{className:"h-3.5 w-3.5 mr-2"}),"Remove from Team"]})})]})]})},P.id)})]}),(0,b.jsx)(t.Dialog,{open:!!N,onOpenChange:a=>!a&&O(null),children:(0,b.jsxs)(t.DialogContent,{className:"max-w-sm",children:[(0,b.jsxs)(t.DialogHeader,{children:[(0,b.jsx)(t.DialogTitle,{children:"Remove Team Member"}),(0,b.jsxs)(t.DialogDescription,{children:["Are you sure you want to remove ",(0,b.jsx)("span",{className:"font-semibold text-foreground",children:N?.name}),"? This action cannot be undone."]})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-2 pt-2",children:[(0,b.jsx)(s.Button,{variant:"outline",onClick:()=>O(null),children:"Cancel"}),(0,b.jsx)(s.Button,{variant:"destructive",onClick:X,disabled:F.isPending,children:F.isPending?"Removing...":"Remove"})]})]})})]})}a.s(["default",()=>S],34872)}];

//# sourceMappingURL=src_features_admin_pages_TeamManagement_tsx_7a5743b2._.js.map