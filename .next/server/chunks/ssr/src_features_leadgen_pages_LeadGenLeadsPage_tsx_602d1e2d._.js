module.exports=[41441,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(87532),e=a.i(81560),f=a.i(10448),g=a.i(46864),h=a.i(70106);let i=(0,h.default)("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),j=(0,h.default)("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);var k=a.i(96221),l=a.i(33508),m=a.i(14548),n=a.i(72162),o=a.i(99570);a.i(84225);var p=a.i(80317),q=a.i(30535),r=a.i(54614),s=a.i(86570);function t(){let{data:a=[],isLoading:h}=(0,p.useLeads)(),{data:t=[]}=(0,q.useAgents)(),u=(0,p.useDeleteLead)(),v=(0,p.useUpdateLead)(),w=(0,p.useBulkAssign)(),x=(0,p.useBulkDelete)(),{toast:y}=(0,r.useToast)(),[z,A]=(0,c.useState)(""),[B,C]=(0,c.useState)("all"),[D,E]=(0,c.useState)("all"),[F,G]=(0,c.useState)("all"),[H,I]=(0,c.useState)(!1),J=(0,c.useRef)(null);(0,c.useEffect)(()=>{let a=a=>{J.current&&!J.current.contains(a.target)&&I(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]);let[K,L]=(0,c.useState)(new Set),[M,N]=(0,c.useState)(""),[O,P]=(0,c.useState)(null),[Q,R]=(0,c.useState)({name:"",email:"",companyName:"",status:"New Lead",assignedAgent:"",notes:"",title:"",city:"",state:""}),[S,T]=(0,c.useState)(null),[U,V]=(0,c.useState)(!1),W=(0,c.useMemo)(()=>t.filter(a=>"sdr"===a.role),[t]),X=(0,c.useMemo)(()=>a.filter(a=>{let b=z.toLowerCase(),c=!z||a.name?.toLowerCase().includes(b)||a.email?.toLowerCase().includes(b)||a.companyName?.toLowerCase().includes(b)||(a.phone||"").includes(z),d="all"===B||a.status===B,e="all"===D||a.assignedAgent===D||a.addedBy===D,f="all"===F||a.priority===F;return c&&d&&e&&f}),[a,z,B,D,F]),Y=+("all"!==B)+ +("all"!==F)+ +("all"!==D),Z=X.length>0&&X.every(a=>K.has(a.id)),$=async()=>{if(M&&0!==K.size)try{let a=await w.mutateAsync({leadIds:Array.from(K),agentName:M});y({title:"Bulk assignment complete",description:`${a.updated} lead(s) assigned to ${M}.`}),L(new Set),N("")}catch(a){y({title:"Error",description:a.message,variant:"destructive"})}},_=async()=>{if(0!==K.size)try{let a=await x.mutateAsync({leadIds:Array.from(K)});y({title:"Bulk deletion complete",description:`${a.deleted} lead(s) deleted.`}),L(new Set),V(!1)}catch(a){y({title:"Error",description:a.message,variant:"destructive"})}},aa=async(a,b)=>{try{await v.mutateAsync({id:a,data:{assignedAgent:b}}),y({title:"Lead assigned",description:`Assigned to ${b||"Unassigned"}.`})}catch(a){y({title:"Error",description:a.message,variant:"destructive"})}},ab=async()=>{if(O)try{await v.mutateAsync({id:O.id,data:Q}),y({title:"Lead updated"}),P(null)}catch(a){y({title:"Error",description:a.message,variant:"destructive"})}},ac=async a=>{try{await u.mutateAsync(a),y({title:"Lead deleted"}),T(null),L(b=>{let c=new Set(b);return c.delete(a),c})}catch(a){y({title:"Error",description:a.message,variant:"destructive"})}};return h?(0,b.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,b.jsx)(k.Loader2,{className:"h-8 w-8 animate-spin text-primary"})}):(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-foreground",children:"All Leads"}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:[a.length," total leads"]})]})}),(0,b.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(d.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)("input",{type:"text",placeholder:"Search name, email, company...",value:z,onChange:a=>A(a.target.value),className:"w-full h-10 rounded-lg border border-input bg-background pl-9 pr-3 text-sm text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:border-transparent transition-all"})]}),(0,b.jsxs)("div",{className:"relative",ref:J,children:[(0,b.jsxs)(o.Button,{variant:"outline",size:"sm",className:"h-10 gap-2 px-4",onClick:()=>I(!H),children:[(0,b.jsx)(n.SlidersHorizontal,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Filters"}),Y>0&&(0,b.jsx)("span",{className:"flex h-5 w-5 items-center justify-center rounded-full bg-primary text-primary-foreground text-xs font-bold",children:Y})]}),H&&(0,b.jsxs)("div",{className:"absolute right-0 top-full mt-2 w-72 rounded-xl border border-border bg-card shadow-elevated z-50 overflow-hidden animate-slide-up",children:[(0,b.jsx)("div",{className:"px-4 py-3 border-b border-border bg-secondary/30",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("p",{className:"text-sm font-semibold text-foreground",children:"Filters"}),Y>0&&(0,b.jsx)("button",{onClick:()=>{C("all"),G("all"),E("all")},className:"text-xs text-primary hover:underline font-medium",children:"Clear all"})]})}),(0,b.jsxs)("div",{className:"p-4 space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-muted-foreground mb-2",children:"Team Member"}),(0,b.jsxs)("select",{value:D,onChange:a=>E(a.target.value),className:"w-full h-9 rounded-lg border border-input bg-background px-3 text-sm text-foreground",children:[(0,b.jsx)("option",{value:"all",children:"All Users"}),t.map(a=>(0,b.jsx)("option",{value:a.name,children:a.name},a.id))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-muted-foreground mb-2",children:"Status"}),(0,b.jsxs)("select",{value:B,onChange:a=>C(a.target.value),className:"w-full h-9 rounded-lg border border-input bg-background px-3 text-sm text-foreground",children:[(0,b.jsx)("option",{value:"all",children:"All Statuses"}),s.STAGE_KEYS.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-muted-foreground mb-2",children:"Priority"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{onClick:()=>G("all"),className:`flex-1 h-9 rounded-lg border text-sm font-medium transition-colors ${"all"===F?"bg-primary text-primary-foreground border-primary":"border-input bg-background text-foreground hover:bg-secondary"}`,children:"All"}),s.PRIORITY_KEYS.map(a=>(0,b.jsx)("button",{onClick:()=>G(a),className:`flex-1 h-9 rounded-lg border text-sm font-medium transition-colors ${F===a?"bg-primary text-primary-foreground border-primary":"border-input bg-background text-foreground hover:bg-secondary"}`,children:a},a))]})]})]})]})]})]}),Y>0&&(0,b.jsxs)("div",{className:"flex gap-2 flex-wrap",children:["all"!==B&&(0,b.jsxs)("span",{className:"inline-flex items-center gap-1.5 rounded-full border border-primary/20 bg-primary/10 px-3 py-1 text-xs font-medium text-primary",children:["Status: ",B,(0,b.jsx)("button",{onClick:()=>C("all"),className:"hover:text-primary/70 transition-colors",children:(0,b.jsx)(l.X,{className:"h-3 w-3"})})]}),"all"!==F&&(0,b.jsxs)("span",{className:"inline-flex items-center gap-1.5 rounded-full border border-primary/20 bg-primary/10 px-3 py-1 text-xs font-medium text-primary",children:["Priority: ",F,(0,b.jsx)("button",{onClick:()=>G("all"),className:"hover:text-primary/70 transition-colors",children:(0,b.jsx)(l.X,{className:"h-3 w-3"})})]}),"all"!==D&&(0,b.jsxs)("span",{className:"inline-flex items-center gap-1.5 rounded-full border border-primary/20 bg-primary/10 px-3 py-1 text-xs font-medium text-primary",children:["User: ",D,(0,b.jsx)("button",{onClick:()=>E("all"),className:"hover:text-primary/70 transition-colors",children:(0,b.jsx)(l.X,{className:"h-3 w-3"})})]})]}),K.size>0&&(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-3 rounded-lg border border-primary/30 bg-primary/5 px-4 py-3",children:[(0,b.jsxs)("span",{className:"text-sm font-medium text-foreground",children:[K.size," lead(s) selected"]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 ml-auto",children:[(0,b.jsxs)("select",{value:M,onChange:a=>N(a.target.value),className:"h-8 rounded-md border border-input bg-background px-2 text-sm text-foreground",children:[(0,b.jsx)("option",{value:"",children:"Select SDR to assign..."}),W.map(a=>(0,b.jsx)("option",{value:a.name,children:a.name},a.id))]}),(0,b.jsxs)(o.Button,{size:"sm",className:"gradient-primary border-0",onClick:$,disabled:!M||w.isPending,children:[(0,b.jsx)(g.UserCheck,{className:"h-4 w-4 mr-1.5"}),w.isPending?"Assigning...":"Assign"]}),(0,b.jsxs)(o.Button,{size:"sm",variant:"destructive",onClick:()=>V(!0),disabled:x.isPending,children:[(0,b.jsx)(e.Trash2,{className:"h-4 w-4 mr-1.5"}),"Delete"]}),(0,b.jsx)(o.Button,{size:"sm",variant:"ghost",onClick:()=>L(new Set),children:(0,b.jsx)(l.X,{className:"h-4 w-4"})})]})]}),(0,b.jsxs)("div",{className:"rounded-xl border border-border bg-card shadow-card overflow-hidden",children:[(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-sm",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-border bg-muted/40",children:[(0,b.jsx)("th",{className:"px-4 py-3 text-left w-10",children:(0,b.jsx)("button",{onClick:()=>{Z?L(new Set):L(new Set(X.map(a=>a.id)))},className:"text-muted-foreground hover:text-foreground",children:Z?(0,b.jsx)(i,{className:"h-4 w-4 text-primary"}):(0,b.jsx)(j,{className:"h-4 w-4"})})}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground",children:"Name"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground hidden md:table-cell",children:"Company"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground hidden lg:table-cell",children:"Email"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground",children:"Status"}),(0,b.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-muted-foreground",children:"Assigned To"}),(0,b.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-muted-foreground",children:"Actions"})]})}),(0,b.jsx)("tbody",{children:0===X.length?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:7,className:"px-4 py-12 text-center text-muted-foreground text-sm",children:"No leads found."})}):X.map(a=>(0,b.jsxs)("tr",{className:`border-b border-border/50 hover:bg-muted/30 transition-colors ${K.has(a.id)?"bg-primary/5":""}`,children:[(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)("button",{onClick:()=>{var b;return b=a.id,void L(a=>{let c=new Set(a);return c.has(b)?c.delete(b):c.add(b),c})},className:"text-muted-foreground hover:text-foreground",children:K.has(a.id)?(0,b.jsx)(i,{className:"h-4 w-4 text-primary"}):(0,b.jsx)(j,{className:"h-4 w-4"})})}),(0,b.jsxs)("td",{className:"px-4 py-3",children:[(0,b.jsx)("p",{className:"font-medium text-foreground",children:a.name}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:a.title||"—"})]}),(0,b.jsx)("td",{className:"px-4 py-3 hidden md:table-cell text-muted-foreground",children:a.companyName||"—"}),(0,b.jsx)("td",{className:"px-4 py-3 hidden lg:table-cell text-muted-foreground",children:a.email||"—"}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsx)("span",{className:`inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium ${(0,s.getStageBadgeClass)(a.status)}`,children:a.status})}),(0,b.jsx)("td",{className:"px-4 py-3",children:(0,b.jsxs)("select",{value:a.assignedAgent||"",onChange:b=>aa(a.id,b.target.value),className:"h-7 rounded-md border border-input bg-background px-2 text-xs text-foreground max-w-[140px]",children:[(0,b.jsx)("option",{value:"",children:"Unassigned"}),W.map(a=>(0,b.jsx)("option",{value:a.name,children:a.name},a.id))]})}),(0,b.jsx)("td",{className:"px-4 py-3 text-right",children:(0,b.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,b.jsx)(o.Button,{variant:"ghost",size:"icon",className:"h-7 w-7 text-muted-foreground hover:text-foreground",onClick:()=>{P(a),R({name:a.name||"",email:a.email||"",companyName:a.companyName||"",status:a.status||"New Lead",assignedAgent:a.assignedAgent||"",notes:a.notes||"",title:a.title||"",city:a.city||"",state:a.state||""})},children:(0,b.jsx)(f.Edit2,{className:"h-3.5 w-3.5"})}),(0,b.jsx)(o.Button,{variant:"ghost",size:"icon",className:"h-7 w-7 text-muted-foreground hover:text-destructive",onClick:()=>T(a.id),children:(0,b.jsx)(e.Trash2,{className:"h-3.5 w-3.5"})})]})})]},a.id))})]})}),(0,b.jsxs)("div",{className:"px-4 py-2 border-t border-border bg-muted/20 text-xs text-muted-foreground",children:["Showing ",X.length," of ",a.length," leads"]})]}),O&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-foreground/40 p-4",children:(0,b.jsxs)("div",{className:"w-full max-w-lg rounded-xl border border-border bg-card shadow-xl",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-border",children:[(0,b.jsx)("h2",{className:"text-base font-semibold text-foreground",children:"Edit Lead"}),(0,b.jsx)("button",{onClick:()=>P(null),className:"text-muted-foreground hover:text-foreground",children:(0,b.jsx)(l.X,{className:"h-5 w-5"})})]}),(0,b.jsxs)("div",{className:"px-6 py-4 space-y-3 max-h-[70vh] overflow-y-auto",children:[[{label:"Name",key:"name",type:"text"},{label:"Title",key:"title",type:"text"},{label:"Email",key:"email",type:"email"},{label:"Company",key:"companyName",type:"text"},{label:"City",key:"city",type:"text"},{label:"State",key:"state",type:"text"}].map(a=>(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-muted-foreground mb-1",children:a.label}),(0,b.jsx)("input",{type:a.type,value:Q[a.key],onChange:b=>R(c=>({...c,[a.key]:b.target.value})),className:"w-full h-9 rounded-lg border border-input bg-background px-3 text-sm text-foreground"})]},a.key)),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-muted-foreground mb-1",children:"Status"}),(0,b.jsx)("select",{value:Q.status,onChange:a=>R(b=>({...b,status:a.target.value})),className:"w-full h-9 rounded-lg border border-input bg-background px-3 text-sm text-foreground",children:s.STAGE_KEYS.map(a=>(0,b.jsx)("option",{value:a,children:a},a))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-muted-foreground mb-1",children:"Assign to SDR"}),(0,b.jsxs)("select",{value:Q.assignedAgent,onChange:a=>R(b=>({...b,assignedAgent:a.target.value})),className:"w-full h-9 rounded-lg border border-input bg-background px-3 text-sm text-foreground",children:[(0,b.jsx)("option",{value:"",children:"Unassigned"}),W.map(a=>(0,b.jsx)("option",{value:a.name,children:a.name},a.id))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-muted-foreground mb-1",children:"Notes"}),(0,b.jsx)("textarea",{value:Q.notes,onChange:a=>R(b=>({...b,notes:a.target.value})),rows:3,className:"w-full rounded-lg border border-input bg-background px-3 py-2 text-sm text-foreground resize-none"})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-end gap-3 px-6 py-4 border-t border-border",children:[(0,b.jsx)(o.Button,{variant:"outline",onClick:()=>P(null),children:"Cancel"}),(0,b.jsxs)(o.Button,{className:"gradient-primary border-0",onClick:ab,disabled:v.isPending,children:[(0,b.jsx)(m.Save,{className:"h-4 w-4 mr-2"}),v.isPending?"Saving...":"Save Changes"]})]})]})}),S&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-foreground/40 p-4",children:(0,b.jsxs)("div",{className:"w-full max-w-sm rounded-xl border border-border bg-card shadow-xl p-6",children:[(0,b.jsx)("h2",{className:"text-base font-semibold text-foreground mb-2",children:"Delete Lead?"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-6",children:"This action cannot be undone."}),(0,b.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,b.jsx)(o.Button,{variant:"outline",onClick:()=>T(null),children:"Cancel"}),(0,b.jsx)(o.Button,{variant:"destructive",onClick:()=>ac(S),disabled:u.isPending,children:u.isPending?"Deleting...":"Delete"})]})]})}),U&&(0,b.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-foreground/40 p-4",children:(0,b.jsxs)("div",{className:"w-full max-w-sm rounded-xl border border-border bg-card shadow-xl p-6",children:[(0,b.jsxs)("h2",{className:"text-base font-semibold text-foreground mb-2",children:["Delete ",K.size," Leads?"]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mb-6",children:"This action cannot be undone. All selected leads and their associated data will be removed."}),(0,b.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,b.jsx)(o.Button,{variant:"outline",onClick:()=>V(!1),children:"Cancel"}),(0,b.jsx)(o.Button,{variant:"destructive",onClick:_,disabled:x.isPending,children:x.isPending?"Deleting...":"Delete"})]})]})})]})}a.s(["default",()=>t],41441)}];

//# sourceMappingURL=src_features_leadgen_pages_LeadGenLeadsPage_tsx_602d1e2d._.js.map